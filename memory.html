<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Memory Game</title>
  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 60px);
      gap: 10px;
      justify-content: center;
    }
    .card {
      width: 60px;
      height: 60px;
      background: #ccc;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
  </style>
  <script>
    let cards = [], flipped = [], matched = 0;
    let timer, countdown = 30;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startGame() {
      const numbers = [1, 2, 3, 4, 1, 2, 3, 4];
      shuffle(numbers);
      cards = numbers;
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      numbers.forEach((num, idx) => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.index = idx;
        card.onclick = () => flipCard(card, num);
        grid.appendChild(card);
      });

      timer = setInterval(() => {
        countdown--;
        document.getElementById("timer").innerText = countdown;
        if (countdown <= 0) {
          clearInterval(timer);
          alert("Time's up!");
          window.location.href = "../index.html";
        }
      }, 1000);
    }

    function flipCard(card, num) {
      if (flipped.length === 2 || card.classList.contains("matched")) return;

      card.innerText = num;
      flipped.push({ index: card.dataset.index, value: num, element: card });

      if (flipped.length === 2) {
        if (flipped[0].value === flipped[1].value) {
          flipped[0].element.classList.add("matched");
          flipped[1].element.classList.add("matched");
          matched += 2;
          if (matched === cards.length) {
            clearInterval(timer);
            alert("You matched all cards!");
            window.location.href = "../index.html";
          }
        } else {
          setTimeout(() => {
            flipped[0].element.innerText = "";
            flipped[1].element.innerText = "";
          }, 600);
        }
        flipped = [];
      }
    }

    window.onload = startGame;
  </script>
</head>
<body>
  <h2>Memory Game</h2>
  <p>Time Left: <span id="timer">30</span> sec</p>
  <div class="grid" id="grid"></div>
</body>
</html>
